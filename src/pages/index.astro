---
	import { TabsIDs } from "../components/Navbar/";
	import Layout from "../layouts/Layout.astro";
	import { Icons } from "../svgs/";
	import { studies as StudiesInfos } from "../data/education";
	import { jobs as JobsInfos } from "../data/jobs";
	import { projects as ProjectsInfos } from "../data/projects";

	interface ContactLink {
        href: string,
        text: string,
        title: string,
        icon: typeof Icons[keyof typeof Icons]
    }

    const contactsLinks: Array<ContactLink> = [
        {
            href: "https://www.linkedin.com/in/miguel-magueijo/",
            text: "in/miguelmagueijo",
            title: "LinkedIn - Miguel Magueijo",
            icon: Icons.LinkedIn,
        },
        {
            href: "https://www.facebook.com/profile.php?id=100077211735856",
            text: "Miguel Magueijo",
            title: "Facebook - Miguel Magueijo",
            icon: Icons.Facebook,
        },
        {
            href: "https://github.com/miguelmagueijo",
            text: "/miguelmagueijo",
            title: "Github - Miguel Magueijo",
            icon: Icons.Github,
        },
    ];
---

<Layout title="Home | Miguel Magueijo" activeTabID={ TabsIDs.home }>
	<section class="my-5">
		<div class="md:grid md:grid-cols-2 md:items-center">
			<img src="/me.png" class="rounded-full img bg-gradient dark:bg-dark-gradient p-0.5 md:width-full">
			<div>
				<h1 class="mt-2 text-2xl font-bold text-left text-primary dark:text-darkPrimary sm:text-center md:text-5xl">Miguel Magueijo</h1>
				<h2 class="text-xl text-right text-secondary dark:text-darkSecondary sm:text-center md:text-4xl">Student & Developer</h2>
			</div>
		</div>
		<div class="mt-8">
			<p class="text-lg md:text-xl">
				Hi ðŸ‘‹<br>I'm <b>Miguel Magueijo</b>, Portuguese ðŸ‡µðŸ‡¹ and I'm 21 years old.
			</p>
			<p class="mt-4 md:text-lg">
				At the moment, I am a student at IPCB (Instituto PolitÃ©cnico de Castelo Branco) and I study Computer Science and Multimedia (InformÃ¡tica e MultimÃ©dia).
			</p>
			<p class="mt-1 md:text-lg">
				One of my favorite hobbies is programming, and sometimes I challenge myself to try to develop my own versions of apps with improvements that I think are needed or develop simple apps that come to my mind in random moments.
			</p>
			<p class="mt-1 md:text-lg">
				I also love videogames and fantasy worlds, being immersed in games and stories is one of the best things ever!
			</p>
			<hr class="my-4 border-2 rounded opacity-90 dark:opacity-10">
			<p class="md:text-lg">
				This website shows a little about me, my education path, work experience and enumerates all projects I developed or helped in.<br>
				Want to work together or ask me something? <a class="underline" href="#contact-area">Send me a message!</a>
			</p>
			<p class="text-xs mt-2 opacity-40">
				This website is still being worked on! Updates are coming.
			</p>
		</div>
	</section>

	<section class="my-10">
		<div class="flex space-x-2 items-center">
			<Icons.User class=" stroke-primary dark:stroke-darkPrimary w-[25px] h-[25px] md:w-[35px] md:h-[35px]" />
			<h2 class="text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl">Education</h2>
		</div>
		<hr class="line-gradient dark:line-dark-gradient mb-4">
		<ul class="space-y-4 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4">
			{ StudiesInfos.map( (s) => 
				<li class="grid grid-cols-5 gap-4">
					<img class="logo-image support-dark" src={ s.imgUrl } alt={ s.imgAlt } title={ s.imgTitle } />
					<div class="text-sm col-span-4">
						<p class="font-bold text-lg md:text-xl">{ s.courseName }</p>
						<p class="font-semibold">{ s.schoolName }</p>
						<p>{ s.degree }</p>
						<p>{ s.start } - { s.end }</p>
					</div>
				</li>
			).reverse() }
		</ul>
	</section>

	<section class="my-10">
		<div class="flex space-x-2 items-center">
			<Icons.Suitcase class=" stroke-primary dark:stroke-darkPrimary w-[25px] h-[25px] md:w-[35px] md:h-[35px]" />
			<h2 class="text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl">Work experience</h2>
		</div>
		<hr class="line-gradient dark:line-dark-gradient mb-4">
		<ul class="space-y-4 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4">
			{ JobsInfos.map( (j) => 
				<li class="grid grid-cols-5 gap-4">
					<img class="logo-image" src={ j.imgUrl } alt={ j.imgAlt } title={ j.imgTitle } />
					<div class="text-sm col-span-4">
						<p class="font-bold text-lg md:text-xl">{ j.jobName }</p>
						<p class="font-semibold">{ j.companyName }</p>
						<p>{ j.positionName }</p>
						<p>{ j.start } - { j.end }</p>
					</div>
				</li>
			).reverse() }
		</ul>
	</section>

	<section class="my-10">
		<div class="flex space-x-2 items-center">
			<Icons.Box class="stroke-primary dark:stroke-darkPrimary w-[25px] h-[25px] md:w-[35px] md:h-[35px]" />
			<h2 class="text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl">Projects</h2>
		</div>
		<hr class="line-gradient dark:line-dark-gradient mb-4">
		<ul class="space-y-4 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4">
			{ ProjectsInfos.map( (p) =>
				<li class="grid grid-cols-5 gap-4">
					<img class="logo-image support-dark" src={ p.imgUrl } alt={ p.imgAlt } title={ p.imgTitle } />
					<div class="text-sm col-span-4">
						<div class="flex space-x-2 items-center">
							<span class="font-bold text-lg md:text-xl">{ p.name }</span>
							{
								p.githubRepo
								&& 
								<a href={ p.githubRepo } target="_blank" rel="noopener noreferrer">
								<Icons.Github width="20px" class="fill-black dark:fill-white" />
								</a>
							}
						</div>
						<project-pill data-api={ p.githubApi } data-link={ p.link }>
							<a href={ p.link } class="hidden project-pill active-project-pill" target="_blank">Active</a>
							<span class="hidden project-pill archived-project-pill">Archived</span>
						</project-pill>
						<p class="font-semibold">{ p.smallDesc }</p>
						<p>{ p.year }</p>
					</div>
				</li>
			).reverse() }
		</ul>
	</section>

	<section class="my-10">
		<div class="flex space-x-2 items-center">
			<Icons.CodeDesktop class="stroke-primary dark:stroke-darkPrimary w-[25px] h-[25px] md:w-[35px] md:h-[35px]" />
			<h2 class="text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl">Technologies</h2>
		</div>
		<hr class="line-gradient dark:line-dark-gradient mb-4">
		<div class="grid grid-cols-6 gap-4 items-center programming-languages-imgs sm:grid-cols-12">
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java logo" title="Java" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python logo" title="Python" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-plain.svg" alt="Javascript logo" title="Javascript" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-plain.svg" alt="Typescript logo" title="Typescript" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-plain.svg" alt="PHP logo" title="PHP" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-plain.svg" alt="HTML5 logo" title="HTML5" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-plain.svg" alt="CSS logo" title="CSS" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-plain.svg" alt="MySQL logo" title="MySQL" />
			<img class="bg-white" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/microsoftsqlserver/microsoftsqlserver-plain.svg" alt="Microsoft SQL Server logo" title="Microsoft SQL Server" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/oracle/oracle-original.svg" alt="Oracle logo" title="Oracle Database" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git Logo" title="Git" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="NodeJs logo" title="NodeJs" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-plain.svg" alt="TailwindCSS logo" title="TailwindCSS" />
			<img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg" alt="Visual Studio Code logo" title="Visual Studio Code" />
		</div>
	</section>

	<section class="my-10 p-1 bg-gradient dark:bg-dark-gradient rounded">
		<details class="bg-white dark:bg-black rounded">
			<summary class="p-2 flex justify-between items-center cursor-pointer">
				<span class="inline-block text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl">Others</span>
				<Icons.ArrowDown class="otherArrow stroke-secondary dark:stroke-darkSecondary w-[25px] h-[25px] md:w-[35px] md:h-[35px]" strokeWidth={ 3 } />
			</summary>
			<div class="p-2 rounded-b">
				<h3 class="font-bold text-lg md:text-xl">Areas of interest</h3>
				<ul class="list-disc list-inside">
					<li>Gaming & Game Development</li>
					<li>Fantasy Stories and Worlds</li>
					<li>Artificial Intelligence</li>
					<li>Databases</li>
				</ul>
				<h3 class="mt-5 font-bold text-lg md:text-xl">Technologies I've been using/trying</h3>
				<ul class="list-disc list-inside">
					<li>Astro JS</li>
					<li>Svelte</li>
					<li>React</li>
					<li>Docker</li>
					<small>Fun fact: this website is made with Astro & Tailwind</small>
				</ul>
				<h3 class="mt-5 font-bold text-lg md:text-xl">I want to learn</h3>
				<ul class="list-disc list-inside">
					<li>Game Development (Godot/Unreal)</li>
					<li>C++</li>
					<li>Data Analysis</li>
					<li>Artificial Intelligence</li>
				</ul>
			</div>
		</details>
	</section>

	<hr class="my-8 md:my-12 rounded border-2 opacity-90 dark:opacity-10">

	<section id="contact-area" class="mb-10 space-y-4 focus:border-2 focus:border-black">
        <div>
            <h1 class="text-4xl md:text-5xl font-bold text-primary dark:text-darkPrimary">
                Let's talk!
            </h1>
            <p class="text-lg md:text-xl text-secondary dark:text-darkSecondary font-semibold">
                Do you want to ask me something or want to work with me?
                <br>
                Hit me with a message on any of my socials! 
            </p>
        </div>
        <div>
            <h2 class="inline-block text-xl font-bold text-gradient dark:text-dark-gradient md:text-2xl mb-2">
                You can find me in
            </h2>
            <div class="grid grid-flow-row md:grid-flow-col gap-4 md:grid-cols-3">
                { contactsLinks.map((link) =>
                    <a class="flex space-x-4 items-center text-base md:text-lg underline md:no-underline md:hover:underline" href={link.href} target="_blank">
                        <link.icon class="fill-black dark:fill-white w-[25px] h-[25px] md:w-[30px] md:h-[30px]" />
                        <p>{link.text}</p>
                    </a>
                ) }
            </div>
        </div>
    </section>
</Layout>

<script>
	class ProjectPill extends HTMLElement {
		constructor() {
			super();
			initProjectPill(this);
		}
	}

	async function initProjectPill(ctx: ProjectPill) {
		const archivedPill = ctx.querySelector(".archived-project-pill");
		const activePill = ctx.querySelector(".active-project-pill");

		if (archivedPill === null || activePill === null) {
			console.error("Could not find archived or active pill");
			return false;
		}

		try {
			if (ctx.dataset.api === undefined)
				throw new Error();

			const response = await fetch(ctx.dataset.api);
			const data = await response.json();

			if (data.archived === true) {
				archivedPill.classList.remove("hidden");
				activePill.remove();
			} else {
				activePill.classList.remove("hidden");
				archivedPill.remove();
			}

			ctx.removeAttribute("data-api");
		} catch (e) {
			ctx.remove();
		}
	}
	
	customElements.define("project-pill", ProjectPill);
</script>

<style>
	@keyframes show-details {
		from {
			opacity: 0;
			transform: translateY(-1rem);
		}
	}

	.otherArrow {
		@apply inline-block;
		transition: transform 300ms;
		transform: rotate(-90deg);
	}

	details[open] .otherArrow {
		transform: rotate(0deg);
	}

	details[open] > *:not(summary) {
		animation: show-details 300ms linear;
	}

	img {
		@apply rounded;
	}

	img.support-dark {
		@apply bg-white p-1;
	}

	.programming-languages-imgs img {
		@apply p-1;
	}

	.img {
		@apply w-40 md:w-52 m-auto;
	}

	.logo-image {
		@apply h-[55px] w-[55px]  md:h-[60px] md:w-[60px] shadow border border-black dark:border-white dark:shadow-white border-opacity-10;
	}

	.project-pill {
		@apply text-xs font-bold rounded text-white relative select-none;
		padding-left: 1.1rem;
		padding-right: 0.5rem;
	}

	.project-pill::after {
		@apply absolute rounded-full;
		content: '';
		width: 0.55rem;
		height: 0.55rem;
		top: 50%;
		left: 0.3rem;
		transform: translateY(-50%);
	}

	.active-project-pill {
		@apply bg-green-600;
	}

	.active-project-pill::after {
		@apply bg-white;
	}

	.archived-project-pill {
		@apply  bg-[#a77a1b] cursor-default;
	}

	.archived-project-pill::after {
		@apply bg-black/50;
	}
</style>