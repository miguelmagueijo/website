---
import { Icons } from "../svgs/";

const currentYear = new Date().getFullYear();
---
<footer class="bg-gradient-a dark:bg-dark-gradient-a">
    <div class="grid grid-cols-1 grid-rows-2 gap-4 md:grid-cols-2 md:grid-rows-1">
        <div>
            <h3 class="font-bold text-lg md:text-xl">
                Links
            </h3>
            <ul class="underline md:text-lg">
                <li>
                    <a href="/">Home</a>
                </li>
            </ul>
        </div>
        <div>
            <h3 id="footer-socials" class="mb-2 font-bold text-lg md:text-xl">
                Contact me
            </h3>
            <ul class="leading-none grid grid-flow-col">
                <li>
                    <a class="flex justify-start items-center space-x-2" href="https://www.linkedin.com/in/miguel-magueijo/" target="_blank" rel="noopener noreferrer" title="LinkedIn - Miguel Magueijo">
                        <Icons.LinkedIn class="fill-white w-[20px] h-[20px]" />
                        <p>/miguelmagueijo</p>
                    </a>
                </li>
                <li>
                    <a class="flex justify-start items-center space-x-2" href="https://www.facebook.com/profile.php?id=100077211735856" target="_blank" rel="noopener noreferrer" title="Facebook - Miguel Magueijo">
                        <Icons.Facebook class="fill-white w-[20px] h-[20px]" />
                        <p>Miguel Magueijo</p>
                    </a>
                </li>
            </ul>
            <div class="relative mt-4 p-1 font-bold bg-white rounded shadow-inner text-lg md:text-xl flex items-center">
                <span id="some-hop" class="cursor-pointer">
                    <Icons.Email class="stroke-primary dark:stroke-darkPrimary w-[35px] h-[35px]" />
                </span>
                <p id="some-rea" class="relative text-center cursor-pointer text-gradient dark:text-dark-gradient flex-grow">
                    Click to reveal
                    <p id="some-copy" class="copy-label">
                        Copied!
                    </p>
                </p>
            </div>
        </div>
    </div>
    <hr class="my-4 rounded border-2">
    <div class="text-sm grid grid-cols-3 md:text-base">
        <p>Miguel Magueijo Â© {currentYear}</p>
        <div class="flex justify-center">
            <a href="https://github.com/miguelmagueijo" target="_blank" rel="noopener noreferrer" title="Github - Miguel Magueijo">
                <Icons.Github width="20px" class="fill-white" />
            </a>
        </div>
        <div class="text-right">
            <a class="inline-block underline" href="https://github.com/miguelmagueijo/website" target="_blank" rel="noopener noreferrer" title="Website Source Code Hyperlink">Source Code</a>
        </div>
    </div>
</footer>

<script>
    const ehp = document.getElementById("some-hop");
    const rea = document.getElementById("some-rea");
    const cl = document.getElementById("some-copy");
    const z = Math.pow(2, 6);
    const a = "ma";
    const n = "magueijo";
    const m = "miguel";
    const s = {
        "aa": "il",
        "z": String.fromCharCode(z),
        "c": "eu",
        "k": ".",
        "b": "to",
        "bb": "pt",
        "cc": ":"
    }
    let isRea = false;
    let currJob: number | undefined;

    if (ehp !== null) {
        ehp.addEventListener("click", () => { window.location.href=`${a}${s.aa}${s.b}${s.cc}${s.c}${s.z}${m}${n}${s.k}${s.bb}` });
    }

    if (rea !== null) {
        rea.addEventListener("click", (e) => {
            if (!isRea) {
                rea.innerHTML = `${s.c}${s.z}${m}${n}${s.k}${s.bb}`;
                isRea = true;
            } else {
                navigator.clipboard.writeText(`${s.c}${s.z}${m}${n}${s.k}${s.bb}`);
                if (cl !== null) {
                    cl.classList.add("active");

                    if (currJob)
                        clearTimeout(currJob);

                    currJob = setTimeout(() => { cl.classList.remove("active"); console.log("here") }, 2000);
                }
            }
        });
    }
</script>

<style>
    footer {
        @apply w-full p-4 rounded text-white;
        backdrop-filter: blur(1px);
    }

    .copy-label {
        @apply absolute text-white p-2 bg-black rounded text-sm duration-300;
        visibility: hidden;
        bottom: -120%;
        left: 50%;
        transform: translate(-25%, -50%);
        opacity: 0;
    }

    .copy-label.active {
        visibility: visible;
        opacity: 100;
    }
</style>